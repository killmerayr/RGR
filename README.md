# Программа шифрования файлов

## Описание

Программа реализует три алгоритма шифрования:
1. **Кодовое слово (Виженер)** - шифр с кодовым словом
2. **Табличная перестановка** - двойная табличная перестановка
3. **Тарабарская грамота** - зеркальная замена ASCII символов

## Архитектура

Программа использует **динамическую загрузку библиотек** (dlopen/dlsym) для подключения алгоритмов:

```
main.cpp (dlopen/dlsym)
    ↓
lib/libCodewordCipher.so
lib/libTabletCipher.so
lib/libTarabarCipher.so
```

Это позволяет:
- Независимо компилировать и обновлять алгоритмы
- Использовать одну программу с разными наборами шифров
- Легко интегрировать в другие проекты (просто подключите .so)

## Сборка

```bash
make clean
make
```

Результат:
- `rgz` - исполняемый файл программы
- `lib/libCodewordCipher.so` - библиотека кодового слова
- `lib/libTabletCipher.so` - библиотека табличной перестановки
- `lib/libTarabarCipher.so` - библиотека тарабарского шифра

## Использование

```bash
./rgz
```

Программа выведет интерактивное меню для выбора:
1. Алгоритма шифрования
2. Операции (шифрование/дешифрование)
3. Пути к входному файлу
4. Параметров алгоритма (если требуются)

## Параметры алгоритмов

### Кодовое слово (Виженер)
- **Кодовое слово**: поддерживает ASCII буквы (A-Z, a-z) **и русские буквы** (А-Я, а-я, ё)
- Все буквы в кодовом слове должны быть уникальными
- Сохраняет регистр букв и не-буквенные символы
- Требует пароль при шифровании (сохраняется в файл `.codeword`)
- При дешифровании запрашивает пароль (отказ при неверном пароле)

### Табличная перестановка
- Размер блока **фиксирован на 8×8 (64 байта)**
- Ключи генерируются **автоматически** при шифровании (сохраняются в файл `.keys`)
- При дешифровании требуется ввести ключи вручную
- Требует пароль при шифровании (сохраняется в файл `.keys` вместе с ключами)
- При дешифровании проверяется пароль перед запросом ключей

### Тарабарская грамота
- Работает с ASCII буквами
- Зеркалирует буквы в алфавите (A↔Z, B↔Y и т.д.)
- Требует пароль при шифровании (сохраняется в файл `.tarabar`)
- При дешифровании проверяется пароль перед расшифровкой

## Защита паролем

**Все три алгоритма защищены паролем:**

1. **Шифрование**: программа запрашивает пароль и его подтверждение
2. **Сохранение**: пароль хешируется и сохраняется в метаданные:
   - для codeword: `.codeword` файл
   - для tablet: `.keys` файл
   - для tarabar: `.tarabar` файл
3. **Дешифрование**: проверяется пароль перед расшифровкой (откат при ошибке)

## Структура проекта

```
.
├── main/
│   ├── main.cpp           # Главная программа с dlopen
│   ├── menuUtils.hpp      # Заголовок утилит меню
│   ├── menuUtils.cpp      # Реализация меню
│   ├── utils.h            # Утилиты работы с файлами
│   └── utils.cpp          # Реализация утилит
├── codeword/
│   ├── codeword.h         # С extern "C" функциями
│   └── codeword.cpp       # Реализация шифра
├── tablet/
│   ├── tablet.h           # С extern "C" функциями
│   └── tablet.cpp         # Реализация табличной перестановки
├── tarabar/
│   ├── tar.h              # С extern "C" функциями
│   └── tar.cpp            # Реализация тарабарского шифра
├── lib/                   # Директория с динамическими библиотеками
│   ├── libCodewordCipher.so
│   ├── libTabletCipher.so
│   └── libTarabarCipher.so
├── Makefile
└── README.md
```

## Технические детали

### Безопасность
- Все алгоритмы работают с байтами (`vector<unsigned char>`)
- Без использования UTF-8 (поддержка только ASCII)
- Сохраняются оригинальные не-буквенные символы

### Производительность
- Линивая загрузка библиотек (RTLD_LAZY)
- Минимальные зависимости (только стандартная библиотека + dlfcn)

### Совместимость
- Linux с поддержкой dlopen (glibc)
- macOS (Mach-O формат)
- Требует C++20

## Лицензия

Образовательный проект
